(()=>{"use strict";var t={152:(t,e,n)=>{n.d(e,{O:()=>a});class a{static cardsUrl="https://64901aaa1e6aa71680ca93bb.mockapi.io/cards";static getCards(){return fetch(a.cardsUrl).then((t=>{if(!t.ok)throw new Error("Network response was not ok");return t.json()})).catch((t=>{throw t}))}static getWomenCards(){return fetch(a.cardsUrl).then((t=>t.json())).then((t=>{let e=[];return t.forEach((t=>{"women"===t.chapter&&e.push(t)})),e})).catch((t=>{throw t}))}static getMenCards(){return fetch(a.cardsUrl).then((t=>t.json())).then((t=>{let e=[];return t.forEach((t=>{"men"===t.chapter&&e.push(t)})),e})).catch((t=>{throw t}))}static getSelectiveCards(){return fetch(a.cardsUrl).then((t=>t.json())).then((t=>{let e=[];return t.forEach((t=>{"selective"===t.chapter&&e.push(t)})),e})).catch((t=>{throw t}))}}},64:(t,e,n)=>{n.d(e,{AF:()=>s,G$:()=>c,e0:()=>a});const a="basket",c="User";let s=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"})},894:(t,e,n)=>{n.d(e,{l:()=>c});var a=n(565);class c{static countElementsInBasket(){const t=a.h.basketStoreData();let e=0;return t.forEach((t=>{e+=Number(t.quantity)})),e}static cheangeBasketCount(){document.querySelector(".basket__count span").textContent=this.countElementsInBasket()}}},695:(t,e,n)=>{function a(t,e,n){const a=document.querySelector(".alert"),c=document.createElement("div");c.classList.add("alert__wrapper",`alert__wrapper_${t}`);const s=document.createElement("span");s.textContent=`${n} ${e}`;const o=document.createElement("span");o.classList.add("alert__line"),o.style.width="0",c.append(s,o),a.append(c),setTimeout((()=>o.style.width="100%"),100),setTimeout((()=>c.remove()),3e3)}n.d(e,{c:()=>c});class c{static error(t){a("error",t,"❌")}static warning(t){a("warning",t,"⚠️")}static success(t){a("success",t,"✅")}}},799:(t,e,n)=>{n.d(e,{t:()=>s});const a=document.querySelector(".basket-modal"),c=document.querySelector(".basket");function s(){a.classList.remove("basket-modal_active"),r()}function o(t){a.contains(t.target)||c.contains(t.target)||t.target.classList.contains("cross")||(a.classList.remove("basket-modal_active"),r())}function r(){const t=document.querySelector(".basket-modal .basket-modal__items"),e=document.querySelector(".basket-modal__footer");a.classList.contains("basket-modal_active")?document.addEventListener("click",o):(document.removeEventListener("click",o),t.innerHTML=null,e.innerHTML=null)}c.addEventListener("click",(function(){a.classList.contains("basket-modal_active")?(a.classList.remove("basket-modal_active"),r()):(a.classList.add("basket-modal_active"),r())}))},732:(t,e,n)=>{n.d(e,{G6:()=>v,ML:()=>b,bB:()=>_,wz:()=>h});var a=n(152),c=n(221),s=n(64),o=n(894),r=n(565);const d=document.querySelector(".basket"),i=document.querySelector(".basket-modal");let l;function u(){const t=r.h.basketStoreData();let e=0;return t.forEach((t=>e+=+t.price)),e}function m(){document.querySelector(".basket-modal__general-price span").textContent=`Итого: ${s.AF.format(u())}`}function p(){const t=r.h.basketStoreData(),e=document.querySelector(".basket-modal .basket-modal__items"),n=document.querySelector(".basket-modal__footer"),a=u();i.classList.contains("basket-modal_active")&&t.forEach((t=>e.append((0,c.lA)(t)))),n.append((0,c.hx)(),(0,c.iF)(a)),E()}function b(t){const e=t.target.parentNode.parentNode,n=e.querySelector(".basket-item__price"),a=r.h.basketStoreData(),c=a.find((t=>t.id===e.id)),s=l.find((t=>t.id===e.id));let d=a;c&&(t.target.classList.contains("basket-item-minus")?1===Number(c.quantity)?(d=a.filter((t=>t.id!==c.id)),e.remove(),0===d.length&&E()):(f(c,s,"-"),k(t.target,c,n)):(f(c,s,"+"),k(t.target,c,n))),r.h.setCardToStore(d),m(),o.l.cheangeBasketCount()}function k(t,e,n){(t.classList.contains("basket-item-minus")?t.nextElementSibling:t.previousElementSibling).textContent=e.quantity,n.textContent=`${s.AF.format(e.price)}`}function f(t,e,n){let a="-"===n;return t.quantity=(a?Number(t.quantity)-1:Number(t.quantity)+1).toString(),t.price=(a?Number(t.price)-Number(e.price):Number(t.price)+Number(e.price)).toString(),t.quantity&&t.price}function _(t){const e=r.h.basketStoreData(),n=t.target.parentNode.parentNode.parentNode.id;let a=[];const c=l.find((t=>t.id===n));if(e){a=e;const t=a.find((t=>t.id===n));t?f(t,c,"+"):a.push(c)}else a.push(c);r.h.setCardToStore(a),o.l.cheangeBasketCount()}function h(t){const e=t.target.parentNode,n=r.h.basketStoreData().filter((t=>e.id!==t.id));r.h.setCardToStore(n),t.target.classList.contains("cross")&&(e.remove(),E(),m(),o.l.cheangeBasketCount())}function v(){document.querySelector(".basket-modal .basket-modal__items").textContent="Корзина пуста",r.h.setCardToStore([]),E(),o.l.cheangeBasketCount()}function E(){const t=document.querySelector(".basket-modal__footer"),e=document.querySelector(".basket-modal .basket-modal__items");document.querySelector(".basket-item")?t.style.display="flex":(t.style.display="none",e.textContent="Корзина пуста")}document.addEventListener("DOMContentLoaded",(function(){!async function(){l=await a.O.getCards()}(),d.addEventListener("click",p),d.append(function(){const t=document.createElement("div");t.classList.add("basket__count");const e=document.createElement("span");return e.textContent=o.l.countElementsInBasket(),t.append(e),t}())}))},221:(t,e,n)=>{n.d(e,{iF:()=>b,lA:()=>m,hx:()=>p});var a=n(799),c=n(732),s=n(64),o=n(695),r=n(565),d=n(894),i=n(780);function l(){i.U.getUserToken()?(o.c.success("Заказ успешно создан"),r.h.setCardToStore([]),(0,a.t)(),d.l.cheangeBasketCount()):o.c.warning("Авторизуйтесь, чтобы сделать заказ")}const u=document.querySelector(".basket-modal");function m(t){const e=document.createElement("div");return e.classList.add("basket-item"),e.id=t.id,e.append(function(t){const e=document.createElement("div");e.classList.add("basket-item__title");const n=document.createElement("h5");return n.textContent=`${t.title}`,e.append(n),n}(t),function(t){const e=document.createElement("div");e.classList.add("basket-item__count");const n=document.createElement("button");n.type="button",n.classList.add("basket-item-minus"),n.textContent="-";const a=document.createElement("span");a.classList.add("basket-item-quantity"),a.textContent=t.quantity;const s=document.createElement("button");return s.type="button",s.classList.add("basket-item-plus"),s.textContent="+",s.addEventListener("click",c.ML),n.addEventListener("click",c.ML),e.append(n,a,s),e}(t),function(t){const e=document.createElement("div");e.classList.add("basket-item__price");const n=document.createElement("span");return n.textContent=`${s.AF.format(t.price)}`,e.append(n),e}(t),function(){const t=document.createElement("button");return t.classList.add("cross","cross_small"),t}()),e}function p(){const t=document.createElement("div");t.classList.add("basket-modal__buttons");const e=document.createElement("button");e.classList.add("basket-modal__delite-all"),e.type="button",e.textContent="Очистить корзину",e.addEventListener("click",c.G6);const n=document.createElement("button");return n.classList.add("btn","basket-modal__order"),n.type="button",n.textContent="Заказать",n.addEventListener("click",l),t.append(e,n),t}function b(t){const e=document.createElement("div");e.classList.add("basket-modal__general-price");const n=document.createElement("span");return n.textContent=`Итого: ${s.AF.format(t)}`,e.append(n),e}document.addEventListener("DOMContentLoaded",(function(){u.append(function(){const t=document.createElement("div");t.classList.add("modal-header");const e=document.createElement("div");e.classList.add("modal-header__heading");const n=document.createElement("h3");n.textContent="Корзина";const c=document.createElement("button");return c.classList.add("cross"),c.type="button",c.addEventListener("click",a.t),e.append(n),t.append(e,c),t}(),function(){const t=document.createElement("div");return t.classList.add("basket-modal__items"),t.addEventListener("click",c.wz),t}(),function(){const t=document.createElement("div");return t.classList.add("basket-modal__footer"),t}())}))},254:(t,e,n)=>{var a=n(152);const c=document.querySelector(".cards__inner");let s=6;function o(){const t=document.querySelector(".cards__show-more");let e=0;const n=Array.from(c.children);for(;e<s&&e<n.length;e++)n[e].classList.add("card_active");n.forEach((t=>{t.classList.contains("card_active")&&setTimeout((()=>t.style.opacity="1"),100)})),e>=n.length?t.style.display="none":t.style.display="block",t.addEventListener("click",r)}function r(){s+=6,o()}var d=n(732),i=n(64);const l=document.querySelector(".cards__wrapper"),u=document.querySelector(".cards__inner"),m=localStorage.getItem("source"),p={catalogWomenBtn:a.O.getWomenCards,catalogMenBtn:a.O.getMenCards,catalogSelectiveBtn:a.O.getSelectiveCards};async function b(t){(await t).forEach((t=>function(t,e,n,a){const c=document.createElement("div");c.classList.add("card"),c.id=a,c.append(function(t){const e=document.createElement("div");e.classList.add("card__image");const n=document.createElement("img");return n.alt="perfume",n.loading="eager",n.src=t,e.append(n),e}(t),function(t,e){const n=document.createElement("div");return n.classList.add("card__content"),n.append(function(t,e){const n=document.createElement("div");return n.classList.add("card__info"),n.append(function(t){const e=document.createElement("div");e.classList.add("card__tittle");const n=document.createElement("h4");return n.textContent=t,e.append(n),e}(t),function(t){const e=document.createElement("div");e.classList.add("card__price");const n=document.createElement("span");return n.textContent=`${i.AF.format(t)}`,e.append(n),e}(e),function(){const t=document.createElement("button");return t.classList.add("btn"),t.type="button",t.textContent="В корзину",t.addEventListener("click",d.bB),t}()),n}(t,e),function(){const t=document.createElement("div");t.classList.add("card__detail");const e=document.createElement("button");return e.type="button",e.textContent="подробнее",t.append(e),t}()),n}(e,n)),u.append(c)}(t.url,t.title,t.price,t.id))),function(){const t=document.createElement("button");t.classList.add("btn","cards__show-more"),t.textContent="Показать больше",l.appendChild(t)}(),o()}document.addEventListener("DOMContentLoaded",(function(){m&&p.hasOwnProperty(m)?(b((0,p[m])()),localStorage.removeItem("source")):b(a.O.getCards())}))},565:(t,e,n)=>{n.d(e,{h:()=>c});var a=n(64);class c{static setCardToStore(t){localStorage.setItem(a.e0,JSON.stringify(t))}static getBasketStore(){return localStorage.getItem(a.e0)}static basketStoreData(){const t=this.getBasketStore();return JSON.parse(t)||[]}}},780:(t,e,n)=>{n.d(e,{U:()=>c});var a=n(64);class c{static setUserToken(t){return sessionStorage.setItem(a.G$,t)}static getUserToken(){return sessionStorage.getItem(a.G$)}static removeUserToken(){return sessionStorage.removeItem(a.G$)}}}},e={};function n(a){var c=e[a];if(void 0!==c)return c.exports;var s=e[a]={exports:{}};return t[a](s,s.exports,n),s.exports}n.d=(t,e)=>{for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n(254)})();